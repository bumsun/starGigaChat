# Звездный ассистент - Бот основанный на GihaChain
![](header.jpg)
Бот умеет по фотографии определять звезды и подписывать по координатам. По звезде, которая ближе всего к центру, бот напишет подробную справку и предоствит 5 самых свежих научных статей на выбор. Статьи бот берет с сайта arxivxplorer.com в реальном времени и переводит на русский язык с помощью GigaChat. После загрузки фотографии реализовано созхранение контестка и спрашивать факты по звезде у GigaChat, либо изучать научные статьи по ссылками на оригиналы.

[Ссылка](https://t.me/starScannerBot) на запущенного бота.

Для успешного тестирования нужно иметь фотографии звездного неба.
В проекте представлены 3 тестовые фотографии: [test1_vega.jpg](test1_vega.jpg), [test2_procion.jpg](test2_procion.jpg) и [test3_pollux](test3_pollux)
Любую из них нужно закинуть в [бота](https://t.me/starScannerBot). После этого бот активируется и сможет проявить свои возможности.


## Коротко как работает определение звезд по фото
Сначала изображение проходит через сверточную нейронную сеть. Сеть определяет индекс звезды в центре экрана. Таким образом алгоритм понимает участок неба для сопоставления.
Теперь по координатам всех известных звезд в этом регионе гененируется синтетический участок неба. Для матчинга с реальной картиной.

В идеальном мире сопосотавление работало бы примрено так: 
![](anim_matching.gif)
Но в реальных условиях, половины тусклых звезд может не хватать, а какие-то очень тусклые звезды, которых нет в синтетическом наборе могут проявится в реальном снимке и пришлось заморочиться.

Алгоритм сопоставления хранится в файле [common_points.py](common_points.py) Ищутся шаблоны в точках по углам и растояниям между ними. Учтены погрешности и все размеры вычисляются в относительных величинах. В конце своей работы алгоритм находит общие структуры и шаблоны. Если их достаточное количество, то значит сопоставление удалось и дальше можно подписывать координаты звезд. 

![](example_result.jpg)
